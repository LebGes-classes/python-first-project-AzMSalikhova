from os import name, system


class Renderer:
    """–ö–ª–∞—Å—Å –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∏–≥—Ä—ã."""

    @staticmethod
    def clear_screen() -> None:
        """–ú–µ—Ç–æ–¥ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–æ–Ω—Å–æ–ª—è."""

        system('cls' if name == 'nt' else 'clear')

    def render_menu(self) -> None:
        """–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –º–µ–Ω—é."""

        self.clear_screen()
        print("-" * 40 + '\n' +
              ' ' * 14 + "–õ–ê–ë–ò–†–ò–ù–¢" + '\n' +
              "-" * 40 + '\n'
              "\n1. –ù–∞—á–∞—Ç—å –∏–≥—Ä—É" + '\n'
              "2. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è" + '\n'
              "3. –í—ã—Ö–æ–¥" + '\n'
              "\n" + "-" * 40)

    def render_instructions(self) -> None:
        """–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏."""

        self.clear_screen()
        print("-" * 40 + "\n" +
              "             –ò–ù–°–¢–†–£–ö–¶–ò–Ø\n" +
              "-" * 40 +
              "\n–¶–µ–ª—å –∏–≥—Ä—ã: –Ω–∞–π—Ç–∏ –≤—ã—Ö–æ–¥ –∏–∑ –ª–∞–±–∏—Ä–∏–Ω—Ç–∞.\n"
              "\n–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:\n"
              "             ‚Üë - –í–≤–µ—Ä—Ö\n"
              "             ‚Üì - –í–Ω–∏–∑\n"
              "             ‚Üê - –í–ª–µ–≤–æ\n"
              "             ‚Üí - –í–ø—Ä–∞–≤–æ\n"              
              "             ESC - –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é\n"
              "\n–£—Ä–æ–≤–Ω–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:\n"
              "                     –õ–µ–≥–∫–∏–π    - –º–∞–ª–µ–Ω—å–∫–∏–π –ª–∞–±–∏—Ä–∏–Ω—Ç (15x11)\n"
              "                     –°—Ä–µ–¥–Ω–∏–π   - —Å—Ä–µ–¥–Ω–∏–π –ª–∞–±–∏—Ä–∏–Ω—Ç (21x15)\n"
              "                     –°–ª–æ–∂–Ω—ã–π   - –±–æ–ª—å—à–æ–π –ª–∞–±–∏—Ä–∏–Ω—Ç (31x21)\n"
              "\n–û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è:\n"
              "              üìï - –°—Ç–∞—Ä—Ç\n"
              "              üìó - –í—ã—Ö–æ–¥\n"
              "               ‚ò∫- –ò–≥—Ä–æ–∫\n"
              "               ‚ñà - –°—Ç–µ–Ω–∞\n"
              "\n" + "-" * 40)

        input("\n–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é...")

    def render_level_selection(self) -> None:
        """–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤—ã–±–æ—Ä–∞ —É—Ä–æ–≤–Ω—è."""

        self.clear_screen()
        print("-" * 40 + "\n" +
              "          –í–´–ë–ï–†–ò–¢–ï –£–†–û–í–ï–ù–¨\n" +
              "-" * 40 + "\n" +
              "\n1. –õ–µ–≥–∫–∏–π"
              "\n2. –°—Ä–µ–¥–Ω–∏–π"
              "\n3. –°–ª–æ–∂–Ω—ã–π"
              "\n4. –ù–∞–∑–∞–¥\n"
              "\n" + "-" * 40)

    def render_game(self, maze, player) -> None:
        """–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è.

        Args:
            player: –ò–≥—Ä–æ–∫(–æ–±—ä–µ–∫—Ç –∫–ª–∞—Å—Å–∞ Player).
            maze: –û–±—ä–µ–∫—Ç —Ç–µ–∫—É—â–µ–≥–æ –ª–∞–±–∏—Ä–∏–Ω—Ç–∞.
        """

        self.clear_screen()
        print(f"–£—Ä–æ–≤–µ–Ω—å: {maze.level_name} ({maze.get_size_info()})\n" +
              "-" * 50)

        start_y = 0
        end_y = maze.get_height()

        start_x = 0
        end_x = maze.get_width()

        # –ï—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –ø–æ–∑–∏—Ü–∏–µ–π –∏–≥—Ä–æ–∫–∞, —Ç–æ –≤—ã–≤–æ–¥–∏—Ç "‚ò∫"
        # –ò–Ω–∞—á–µ - –≤—ã–≤–æ–¥–∏—Ç —Å–∏–º–≤–æ–ª –∏–∑ –ª–∞–±–∏—Ä–∏–Ω—Ç–∞(—Å—Ç–µ–Ω–∞, –ø—Ä–æ—Ö–æ–¥, —Å—Ç–∞—Ä—Ç, –≤—ã—Ö–æ–¥)
        for y in range(start_y, end_y):

            line = ""
            for x in range(start_x, end_x):
                if x == player.x and y == player.y:
                    line += "‚ò∫"
                else:
                    line += maze.grid[y][x]

            print("  " + line)

        print("\n–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: —Å—Ç—Ä–µ–ª–∫–∏ - –¥–≤–∏–∂–µ–Ω–∏–µ, ESC - –º–µ–Ω—é")

    def render_level_complete(self, maze, is_last_level=False) -> str:
        """–û—Ç—Ä–∏—Å–æ–≤–∫–∞ —ç–∫—Ä–∞–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è."""

        self.clear_screen()
        print("-" * 40 + "\n" +
              "                –ü–û–ë–ï–î–ê!" +
              f"\n–í—ã –ø—Ä–æ—à–ª–∏ –ª–∞–±–∏—Ä–∏–Ω—Ç —É—Ä–æ–≤–Ω—è: {maze.level_name}\n")

        if not is_last_level:
            print("\n" + "-" * 40 +
                  "\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:\n" +
                  "1. –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å\n" +
                  "2. –ü–µ—Ä–µ–∏–≥—Ä–∞—Ç—å —ç—Ç–æ—Ç —É—Ä–æ–≤–µ–Ω—å\n" +
                  "3. –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é\n" +
                  "\n" + "-" * 40)

            while True:
                choice = input("\n–í–∞—à –≤—ã–±–æ—Ä: ")

                match choice:
                    case '1':
                        return "next"
                    case '2':
                        return "restart"
                    case '3':
                        return "menu"
                    case _:
                        print("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤—ã–±–æ—Ä –Ω–æ–º–µ—Ä–∞ –º–µ–Ω—é.")

        else:
            print("\n" + "-" * 40 +
                  "\n–í—ã –ø—Ä–æ—à–ª–∏ –í–°–ï —É—Ä–æ–≤–Ω–∏!\n" +
                  "-" * 40 +
                  "\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:\n" +
                  "1. –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ\n" +
                  "2. –í—ã–π—Ç–∏ –≤ –º–µ–Ω—é\n" +
                  "\n" + "-" * 40)

            while True:
                choice = input("\n–í–∞—à –≤—ã–±–æ—Ä (1-2): ")

                match choice:
                    case '1':
                        return "restart_all"
                    case '2':
                        return "menu"
                    case _:
                        print("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤—ã–±–æ—Ä –Ω–æ–º–µ—Ä–∞")
